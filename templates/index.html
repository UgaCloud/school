{% extends "./base.html" %}

{% block page_title %}Dashboard{% endblock page_title %}

{% block content %}
    <!-- top tiles -->
    <div class="row" style="display: inline-block;" >
        <div class="row">
            {% comment %} Card Template Start {% endcomment %}
            <div class="col-md-6 col-lg-2 mb-4">
              <div class="card stat-card shadow-sm border-0 text-center">
                <div class="card-body">
                  <div class="icon-circle bg-primary mb-3 mx-auto">
                    <i class="fa fa-user fa-2x text-white"></i>
                  </div>
                  <h3 class="count" data-count="{{ total_staff }}">0</h3>
                  <p class="text-muted">Total Staff Members</p>
                  <small class="text-success">100% of Staff</small>
                </div>
              </div>
            </div>
          
            <div class="col-md-6 col-lg-2 mb-4">
              <div class="card stat-card shadow-sm border-0 text-center">
                <div class="card-body">
                  <div class="icon-circle bg-info mb-3 mx-auto">
                    <i class="fa fa-male fa-2x text-white"></i>
                  </div>
                  <h3 class="count" data-count="{{ total_males }}">0</h3>
                  <p class="text-muted">Total Male Staff</p>
                  <small class="text-success"><i class="fa fa-arrow-up"></i> {{ male_percentage }}%</small>
                </div>
              </div>
            </div>
          
            <div class="col-md-6 col-lg-2 mb-4">
              <div class="card stat-card shadow-sm border-0 text-center">
                <div class="card-body">
                  <div class="icon-circle bg-danger mb-3 mx-auto">
                    <i class="fa fa-female fa-2x text-white"></i>
                  </div>
                  <h3 class="count" data-count="{{ total_females }}">0</h3>
                  <p class="text-muted">Total Female Staff</p>
                  <small class="text-success"><i class="fa fa-arrow-up"></i> {{ female_percentage }}%</small>
                </div>
              </div>
            </div>
          
            <div class="col-md-6 col-lg-2 mb-4">
              <div class="card stat-card shadow-sm border-0 text-center">
                <div class="card-body">
                  <div class="icon-circle bg-success mb-3 mx-auto">
                    <i class="fa fa-users fa-2x text-white"></i>
                  </div>
                  <h3 class="count" data-count="{{ total_students }}">0</h3>
                  <p class="text-muted">Student Population</p>
                  <small class="text-success">100% of Students</small>
                </div>
              </div>
            </div>
          
            <div class="col-md-6 col-lg-2 mb-4">
              <div class="card stat-card shadow-sm border-0 text-center">
                <div class="card-body">
                  <div class="icon-circle bg-pink mb-3 mx-auto">
                    <i class="fa fa-female fa-2x text-white"></i>
                  </div>
                  <h3 class="count" data-count="{{ total_female_students }}">0</h3>
                  <p class="text-muted">Female Students</p>
                  <small class="text-success"><i class="fa fa-arrow-up"></i> {{ female_students_percentage }}%</small>
                </div>
              </div>
            </div>
          
            <div class="col-md-6 col-lg-2 mb-4">
              <div class="card stat-card shadow-sm border-0 text-center">
                <div class="card-body">
                  <div class="icon-circle bg-warning mb-3 mx-auto">
                    <i class="fa fa-male fa-2x text-white"></i>
                  </div>
                  <h3 class="count" data-count="{{ total_male_students }}">0</h3>
                  <p class="text-muted">Male Students</p>
                  <small class="text-success"><i class="fa fa-arrow-up"></i> {{ male_students_percentage }}%</small>
                </div>
              </div>
            </div>
          </div>
          
          
          
        
    </div>
    <!-- /top tiles -->

    <div class="row">
        <div class="col-md-12 col-sm-12 ">
            <div class="dashboard_graph">
                <div class="row x_title">
                    <div class="col-md-6">
                        <h3>School Performance Overview <small>Academic Year Progress</small></h3>
                    </div>
                    <div class="col-md-6">
                        <div id="reportrange" class="pull-right" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc">
                            <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>
                            <span>January 1, 2024 - December 31, 2024</span> <b class="caret"></b>
                        </div>
                    </div>
                </div>
            
                <div class="col-md-9 col-sm-9">
                    <div id="chart_plot_01" class="demo-placeholder"></div> 
                </div>
            
                <div class="col-md-3 col-sm-3 bg-white">
                    <div class="x_title">
                        <h2>Key Performance Indicators</h2>
                        <div class="clearfix"></div>
                    </div>
            
                    <div class="col-md-12 col-sm-12">
                        <div>
                            <p>Student Enrollment Progress</p>
                            <div class="">
                                <div class="progress progress_sm" style="width: 100%;">
                                    <div class="progress-bar bg-green" role="progressbar" data-transitiongoal="{{ enrollment_percentage }}"></div>
                                </div>
                            </div>
                        </div>
            
                        <div>
                            <p>Fee Collection Status</p>
                            <div class="">
                                <div class="progress progress_sm" style="width: 100%;">
                                    <div class="progress-bar bg-blue" role="progressbar" data-transitiongoal="{{ fee_collection_percentage }}"></div>
                                </div>
                            </div>
                        </div>
                    </div>
            
                    <div class="col-md-12 col-sm-12">
                        <div>
                            <p>Library Book Borrowing</p>
                            <div class="">
                                <div class="progress progress_sm" style="width: 100%;">
                                    <div class="progress-bar bg-orange" role="progressbar" data-transitiongoal="{{ library_usage_percentage }}"></div>
                                </div>
                            </div>
                        </div>
            
                        <div>
                            <p>Teacher Attendance Rate</p>
                            <div class="">
                                <div class="progress progress_sm" style="width: 100%;">
                                    <div class="progress-bar bg-purple" role="progressbar" data-transitiongoal="{{ teacher_attendance_percentage }}"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            
               
            </div>
            
        </div>

    </div>

    
    <style>
        .icon-circle {
          width: 60px;
          height: 60px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .bg-pink {
          background: #e83e8c;
        }
        
        .stat-card {
          transition: all 0.3s ease;
          border-radius: 1rem;
        }
        
        .stat-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .count {
          font-size: 2rem;
          font-weight: bold;
        }

        
        </style>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
              const counters = document.querySelectorAll('.count');
              counters.forEach(counter => {
                counter.innerText = '0';
                const updateCounter = () => {
                  const target = +counter.getAttribute('data-count');
                  const current = +counter.innerText;
                  const increment = target / 200;
            
                  if(current < target) {
                    counter.innerText = `${Math.ceil(current + increment)}`;
                    setTimeout(updateCounter, 10);
                  } else {
                    counter.innerText = target;
                  }
                };
                updateCounter();
              });
            });
            </script>
            
        
          
{% endblock content %}