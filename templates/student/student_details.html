{% extends "../base.html" %}
{% load crispy_forms_tags %}

{% block page_title %}Student Details{% endblock page_title %}

{% block content %}
<div class="row">
  <!-- Profile Sidebar -->
  <div class="col-md-3 col-sm-4">
    <div class="x_panel">
      <div class="x_content text-center">
        <img src="{{ student.photo.url }}" alt="Student Photo" class="img-fluid img-circle img-thumbnail mb-3" style="width: 150px; height: 150px; object-fit: cover; border-radius: 50%;">
        <h3 class="mt-2">{{ student.student_name }}</h3>
        <hr>
        <ul class="list-unstyled user_data text-left pl-2">
          <li><i class="fa fa-id-card mr-1"></i><strong> Reg No:</strong> {{ student.reg_no }}</li>
          <li><i class="fa fa-venus-mars mr-1"></i><strong> Gender:</strong> {{ student.gender }}</li>
          <li><i class="fa fa-birthday-cake mr-1"></i><strong> Birthdate:</strong> {{ student.birthdate }}</li>
          <li><i class="fa fa-globe mr-1"></i><strong> Nationality:</strong> {{ student.nationality }}</li>
          <li><i class="fa fa-praying-hands mr-1"></i><strong> Religion:</strong> {{ student.religion }}</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Profile Details -->
  <div class="col-md-9 col-sm-8">
    <!-- Academic Information -->
    <div class="x_panel">
      <div class="x_title">
        <h2><i class="fa fa-graduation-cap"></i> Academic Information</h2>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">
        <table class="table table-hover">
          <tbody>
            <tr>
              <th>Current Class</th>
              <td>{{ student.current_class }}</td>
            </tr>
            <tr>
              <th>Stream</th>
              <td>{{ student.stream }}</td>
            </tr>
            <tr>
              <th>Academic Year</th>
              <td>{{ student.academic_year }}</td>
            </tr>
            <tr>
              <th>Term</th>
              <td>{{ student.term }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Guardian Info -->
    <div class="x_panel">
      <div class="x_title">
        <h2><i class="fa fa-user-shield"></i> Guardian Information</h2>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">
        <table class="table table-hover">
          <tbody>
            <tr>
              <th>Guardian Name</th>
              <td>{{ student.guardian }}</td>
            </tr>
            <tr>
              <th>Relationship</th>
              <td>{{ student.relationship }}</td>
            </tr>
            <tr>
              <th>Contact</th>
              <td>{{ student.contact }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Documents -->
    <div class="x_panel">
      <div class="x_title">
        <h2><i class="fa fa-folder-open"></i> Documents</h2>
        <div class="clearfix"></div>
      </div>
      <div class="x_content">
        {% if student.documents.all %}
          <ul class="list-group">
            {% for doc in student.documents.all %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ doc.title }}
                <a href="{{ doc.file.url }}" class="btn btn-sm btn-primary" target="_blank"><i class="fa fa-download"></i> View</a>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="text-muted">No documents uploaded yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock content %}
